<!DOCTYPE html>
<html>
<head>
	<!-- ===== 基本設定 ===== -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>管理者用権限編集</title>
	<link rel="stylesheet" type="text/css" href="/static/css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="/static/css/css.css" />
	<script type="text/javascript">
		function jump_upd(state) {
			if(state == 'NEW') {
				obj1 = document.getElementById("select_user_id");
				obj2 = document.getElementById("select_group_folder_id");

				document.authorityEdit.user_id.value = obj1.value;
				document.authorityEdit.group_folder_id.value = obj2.value;
			}

			var authority_state = 0;
			for(var i = 0, length = document.authorityEdit.check_authority_state.length; i < length; i++) {
				if(document.authorityEdit.check_authority_state[i].checked == true) {
					authority_state += 2 ** (4 - i);
				}
			}
			document.authorityEdit.authority_state.value = authority_state

			document.authorityEdit.state.value = state;
			document.authorityEdit.submit();
		}

		function jump_list(list_id) {
			var action_url = '';

			switch(list_id) {
				case '0':
					action_url = "/mastar/menu";
					break;
				case '1':
					action_url = "/mastar/numberingList";
					break;
				case '2':
					action_url = "/mastar/userList";
					break;
				case '3':
					action_url = "/mastar/groupFolderList";
					break;
				case '4':
					action_url = "/mastar/authorityList";
					break;
				case '5':
					action_url = "/mastar/adminUserList";
					break;
			}

			document.authorityEdit.state.value = "SHOW";
			document.authorityEdit.action=action_url;
			document.authorityEdit.submit();
		}
	</script>
	<!-- ===== 基本情報 ===== -->
</head>
<body>
	<!-- ===== ページ全体 ===== -->
	<div id="page">
		<!-- ===== ヘッダー情報 ===== -->
		<header id="pageHead">
			<h1 id="siteTitle">管理者用ユーザ編集</h1>
			<nav class="globalNavi">
				<ul>
					<li><a onclick="jump_list('0');">メニュー</a></li>
					<li><a onclick="jump_list('5');">管理者ユーザ一覧</a></li>
					<li><a onclick="jump_list('1');">採番一覧</a></a></li>
					<li><a onclick="jump_list('2');">ユーザ一覧</a>></a></li>
					<li><a onclick="jump_list('3');">グループフォルダー一覧</a></li>
					<li><a onclick="jump_list('4');">権限一覧</a></li>
				</ul>
			</nav>
		</header>
		<!-- ===== ヘッダー情報 ===== -->

		<!-- ===== コンテンツ ===== -->
		<div id="pageBody">
			<form method="POST" name="authorityEdit">
				{{ form.hidden_tag() }}
				<input type="hidden" name="authority_state" value="0">
				{% if form.user_id.data == '0' or form.group_folder_id.data == '0' %}
					<button type="button" name="createAthority" onclick="jump_upd('NEW');">作成</button>
				{% else %}
					<button type="button" name="createAthority" onclick="jump_upd('UPD');">更新</button>
					<button type="button" name="delateAthority" onclick="jump_upd('DEL');">削除</button>
				{% endif %}
					<button type="button" name="backUser" onclick="jump_list('4');">戻る</button>
				<table>
					<tbody>
						<tr>
							<td>ID:ユーザ</td>
							<td>
								{% if form.user_id.data == '0' or form.group_folder_id.data == '0' %}
									<select id='select_user_id'>
										{% for value in user_list %}
											{% if value[0] == data[0] %}
												<option value="{{value[0]}}" selected>{{value[0]}}:{{value[1]}}</option>
											{% else %}
												<option value="{{value[0]}}">{{value[0]}}:{{value[1]}}</option>
											{% endif %}
										{% endfor %}
									</select>
								{% else %}
									{% for value in user_list %}
										{% if value[0] == data[0] %}
											{{value[0]}}:{{value[1]}}
										{% endif %}
									{% endfor %}
								{% endif %}

							</td>
						</tr>
						<tr>
							<td>ID:グループフォルダー名</td>
							<td>
								{% if form.user_id.data == '0' or form.group_folder_id.data == '0' %}
									<select id='select_group_folder_id'>
										{% for value in groupFolder_list %}
											{% if value[0] == data[2] %}
												<option value="{{value[0]}}" selected>{{value[0]}}:{{value[1]}}</option>
											{% else %}
												<option value="{{value[0]}}">{{value[0]}}:{{value[1]}}</option>
											{% endif %}
										{% endfor %}
									</select>
								{% else %}
									{% for value in groupFolder_list %}
										{% if value[0] == data[0] %}
											{{value[0]}}:{{value[1]}}
										{% endif %}
									{% endfor %}
								{% endif %}
							</td>
						</tr>
						<tr>
							<td>権限状態</td>
							<td>
								<table>
									<tbody>
										{% if state_bit[4] == True %}
											<tr><td>マスター権限</td><td><input type="checkbox" name="check_authority_state" onClick="" checked></td></tr>
										{% else %}
											<tr><td>マスター権限</td><td><input type="checkbox" name="check_authority_state" onClick=""></td></tr>
										{% endif %}

										{% if state_bit[3] == True %}
											<tr><td>グループユーザの追加、削除</td><td><input type="checkbox" name="check_authority_state" onClick="" checked></td></tr>
										{% else %}
											<tr><td>グループユーザの追加、削除</td><td><input type="checkbox" name="check_authority_state" onClick=""></td></tr>
										{% endif %}

										{% if state_bit[2] == True %}
											<tr><td>ブックマーク削除</td><td><input type="checkbox" name="check_authority_state" onClick="" checked></td></tr>
										{% else %}
											<tr><td>ブックマーク削除</td><td><input type="checkbox" name="check_authority_state" onClick=""></td></tr>
										{% endif %}

										{% if state_bit[1] == True %}
											<tr><td>ブックマーク内容の編集</td><td><input type="checkbox" name="check_authority_state" onClick="" checked></td></tr>
										{% else %}
											<tr><td>ブックマーク内容の編集</td><td><input type="checkbox" name="check_authority_state" onClick=""></td></tr>
										{% endif %}

										{% if state_bit[0] == True %}
											<tr><td>ブックマーク追加</td><td><input type="checkbox" name="check_authority_state" onClick="" checked></td></tr>
										{% else %}
											<tr><td>ブックマーク追加</td><td><input type="checkbox" name="check_authority_state" onClick=""></td></tr>
										{% endif %}

									</tbody>
								</table>
							</td>
						</tr>
						<tr><td>作成日時</td><td>{{data[3]}}</td></tr>
						<tr><td>更新日時</td><td>{{data[4]}}</td></tr>
					</tbody>
				</table>
			</form>
		</div>
		<!-- ===== コンテンツ ===== -->

		<p class="pagetop"><a href="#page">ページの先頭へ戻る</a></p>
		<!-- ===== フッダー情報 ===== -->
		<footer id="pageFoot">
			<p id="copyright"><small>&copy; 2019 FlaxBear All Rights Reserved,</small></p>
		</footer>
		<!-- ===== フッダー情報 ===== -->
	</div>
	<!-- ===== ページ全体 ===== -->
</body>
</html>